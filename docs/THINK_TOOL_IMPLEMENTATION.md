# Think Tool å®ç°è¯¦è§£

## æ¦‚è¿°

ç¬¬äºŒä¸ªæ™ºèƒ½ä½“ï¼ˆå†…å®¹åˆ†ææ™ºèƒ½ä½“ï¼‰ä½¿ç”¨çš„ **Structured Thinking Tool** å®é™…ä¸Šæ˜¯ `@modelcontextprotocol/server-sequential-thinking` MCP æœåŠ¡å™¨æä¾›çš„å·¥å…·ã€‚

## æºä»£ç ä½ç½®

- **GitHub ä»“åº“**: https://github.com/modelcontextprotocol/servers/tree/main/src/sequentialthinking
- **NPM åŒ…**: `@modelcontextprotocol/server-sequential-thinking`
- **ä¸»è¦æ–‡ä»¶**:
  - `index.ts` - MCP æœåŠ¡å™¨å…¥å£
  - `lib.ts` - æ ¸å¿ƒæ€è€ƒé€»è¾‘å®ç°

## æ ¸å¿ƒå®ç°åŸç†

### 1. æ•°æ®ç»“æ„

```typescript
interface ThoughtData {
  thought: string;              // å½“å‰æ€è€ƒå†…å®¹
  thoughtNumber: number;        // å½“å‰æ€è€ƒæ­¥éª¤ç¼–å·
  totalThoughts: number;        // é¢„è®¡æ€»æ€è€ƒæ­¥éª¤æ•°
  nextThoughtNeeded: boolean;   // æ˜¯å¦éœ€è¦ç»§ç»­æ€è€ƒ
  isRevision?: boolean;         // æ˜¯å¦æ˜¯ä¿®è®¢
  revisesThought?: number;      // ä¿®è®¢å“ªä¸ªæ€è€ƒæ­¥éª¤
  branchFromThought?: number;   // ä»å“ªä¸ªæ­¥éª¤åˆ†æ”¯
  branchId?: string;            // åˆ†æ”¯æ ‡è¯†ç¬¦
  needsMoreThoughts?: boolean;  // æ˜¯å¦éœ€è¦æ›´å¤šæ€è€ƒ
}
```

### 2. æ ¸å¿ƒç±»ï¼šSequentialThinkingServer

```typescript
class SequentialThinkingServer {
  private thoughtHistory: ThoughtData[] = [];           // æ€è€ƒå†å²è®°å½•
  private branches: Record<string, ThoughtData[]> = {}; // åˆ†æ”¯è®°å½•
  private disableThoughtLogging: boolean;               // æ˜¯å¦ç¦ç”¨æ—¥å¿—
  
  // å¤„ç†æ€è€ƒæ­¥éª¤
  processThought(input: unknown): Response
  
  // éªŒè¯è¾“å…¥æ•°æ®
  validateThoughtData(input: unknown): ThoughtData
  
  // æ ¼å¼åŒ–æ€è€ƒè¾“å‡º
  formatThought(thoughtData: ThoughtData): string
}
```

### 3. å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚
    â†“
æ™ºèƒ½ä½“å¼€å§‹æ€è€ƒ
    â†“
è°ƒç”¨ sequentialthinking å·¥å…·
    â†“
ä¼ å…¥å‚æ•°ï¼š
  - thought: "ç¬¬ä¸€æ­¥ï¼šåˆ†æé—®é¢˜..."
  - thoughtNumber: 1
  - totalThoughts: 5
  - nextThoughtNeeded: true
    â†“
SequentialThinkingServer.processThought()
    â†“
1. éªŒè¯è¾“å…¥æ•°æ®
2. ä¿å­˜åˆ° thoughtHistory
3. å¦‚æœæ˜¯åˆ†æ”¯ï¼Œä¿å­˜åˆ° branches
4. æ ¼å¼åŒ–è¾“å‡ºï¼ˆå¸¦é¢œè‰²å’Œè¾¹æ¡†ï¼‰
5. è¿”å›çŠ¶æ€ä¿¡æ¯
    â†“
æ™ºèƒ½ä½“ç»§ç»­ä¸‹ä¸€æ­¥æ€è€ƒ
    â†“
é‡å¤ç›´åˆ° nextThoughtNeeded = false
```

## æ€è€ƒè¿‡ç¨‹å¯è§†åŒ–

å·¥å…·ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ ¼å¼åŒ–çš„æ€è€ƒè¿‡ç¨‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’­ Thought 1/5                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¦–å…ˆè¯†åˆ«çƒ­ç‚¹çš„æ ¸å¿ƒä¸»é¢˜...            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’­ Thought 2/5                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†æå…³é”®è¯å’Œæƒ…æ„Ÿå€¾å‘...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”„ Revision 3/5 (revising thought 2) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é‡æ–°è€ƒè™‘æƒ…æ„Ÿåˆ†æçš„è§’åº¦...            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ¿ Branch 4/6 (from thought 2, ID: A)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¢ç´¢å¦ä¸€ç§åˆ†æè·¯å¾„...                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…³é”®ç‰¹æ€§

### 1. åŠ¨æ€è°ƒæ•´æ€è€ƒæ­¥éª¤

```typescript
// å¦‚æœå½“å‰æ­¥éª¤è¶…è¿‡é¢„è®¡æ€»æ•°ï¼Œè‡ªåŠ¨è°ƒæ•´
if (validatedInput.thoughtNumber > validatedInput.totalThoughts) {
  validatedInput.totalThoughts = validatedInput.thoughtNumber;
}
```

### 2. æ”¯æŒæ€è€ƒä¿®è®¢

```typescript
{
  thought: "é‡æ–°è€ƒè™‘ä¹‹å‰çš„åˆ†æ...",
  thoughtNumber: 3,
  totalThoughts: 5,
  isRevision: true,
  revisesThought: 2,  // ä¿®è®¢ç¬¬2æ­¥
  nextThoughtNeeded: true
}
```

### 3. æ”¯æŒæ€è€ƒåˆ†æ”¯

```typescript
{
  thought: "æ¢ç´¢å¦ä¸€ç§å¯èƒ½æ€§...",
  thoughtNumber: 4,
  totalThoughts: 6,
  branchFromThought: 2,  // ä»ç¬¬2æ­¥åˆ†æ”¯
  branchId: "alternative-A",
  nextThoughtNeeded: true
}
```

### 4. æ€è€ƒå†å²è¿½è¸ª

```typescript
// è¿”å›çš„çŠ¶æ€ä¿¡æ¯
{
  thoughtNumber: 3,
  totalThoughts: 5,
  nextThoughtNeeded: true,
  branches: ["alternative-A", "alternative-B"],
  thoughtHistoryLength: 8
}
```

## åœ¨åˆ†ææ™ºèƒ½ä½“ä¸­çš„åº”ç”¨

### é…ç½®æ–¹å¼

åœ¨ `config/mcp_servers.json` ä¸­é…ç½®ï¼š

```json
{
  "structured-thinking": {
    "isActive": true,
    "name": "structured-thinking",
    "type": "stdio",
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-sequential-thinking"]
  }
}
```

### ä½¿ç”¨ç¤ºä¾‹

åˆ†ææ™ºèƒ½ä½“åœ¨å¤„ç†çƒ­ç‚¹åˆ†ææ—¶çš„æ€è€ƒè¿‡ç¨‹ï¼š

```
æ­¥éª¤ 1: é—®é¢˜å®šä¹‰
  â†’ "è¯†åˆ«çƒ­ç‚¹çš„æ ¸å¿ƒä¸»é¢˜å’Œå…³é”®ä¿¡æ¯"

æ­¥éª¤ 2: æ•°æ®æ”¶é›†
  â†’ "æœç´¢ç›¸å…³å­¦æœ¯èƒŒæ™¯å’Œç ”ç©¶æ•°æ®"

æ­¥éª¤ 3: å†…å®¹åˆ†æ
  â†’ "æå–å…³é”®è¯ã€åˆ†ææƒ…æ„Ÿå€¾å‘"

æ­¥éª¤ 4: è¶‹åŠ¿é¢„æµ‹
  â†’ "åŸºäºæ•°æ®é¢„æµ‹å‘å±•è¶‹åŠ¿"

æ­¥éª¤ 5: å—ä¼—åˆ†æ
  â†’ "åˆ†æç›®æ ‡å—ä¼—ç‰¹å¾å’Œè¡Œä¸º"

æ­¥éª¤ 6: ç»¼åˆæ´å¯Ÿ
  â†’ "ç”Ÿæˆæ•°æ®é©±åŠ¨çš„åˆ†ææŠ¥å‘Š"
```

## ä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Ÿ

### 1. ç»“æ„åŒ–æ¨ç†
- å°†å¤æ‚åˆ†æä»»åŠ¡åˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤
- æ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡å’Œè¾“å‡º

### 2. å¯è¿½æº¯æ€§
- è®°å½•å®Œæ•´çš„æ€è€ƒå†å²
- ä¾¿äºè°ƒè¯•å’Œä¼˜åŒ–åˆ†æè¿‡ç¨‹

### 3. çµæ´»æ€§
- æ”¯æŒåŠ¨æ€è°ƒæ•´æ€è€ƒæ­¥éª¤æ•°
- å¯ä»¥ä¿®è®¢ä¹‹å‰çš„æ€è€ƒ
- å¯ä»¥æ¢ç´¢å¤šä¸ªåˆ†æè·¯å¾„

### 4. è´¨é‡æ§åˆ¶
- å¼ºåˆ¶æ™ºèƒ½ä½“è¿›è¡Œæ·±åº¦æ€è€ƒ
- é¿å…ç®€å•çš„ä¸€æ¬¡æ€§å›ç­”
- ç¡®ä¿åˆ†æçš„å…¨é¢æ€§å’Œæ·±åº¦

### 5. é€æ˜åº¦
- ç”¨æˆ·å¯ä»¥çœ‹åˆ°å®Œæ•´çš„æ¨ç†è¿‡ç¨‹
- å¢å¼ºå¯¹åˆ†æç»“æœçš„ä¿¡ä»»

## ç¯å¢ƒå˜é‡

```bash
# ç¦ç”¨æ€è€ƒæ—¥å¿—è¾“å‡ºï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
DISABLE_THOUGHT_LOGGING=true
```

## å·¥å…·è°ƒç”¨ç¤ºä¾‹

### Python ä»£ç ä¸­çš„è°ƒç”¨

```python
# æ™ºèƒ½ä½“ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå·¥å…·
# ä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™è°ƒç”¨ä»£ç 

# å·¥å…·è°ƒç”¨å‚æ•°ç¤ºä¾‹ï¼š
{
  "thought": "é¦–å…ˆï¼Œæˆ‘éœ€è¦åˆ†æè¿™ä¸ªçƒ­ç‚¹çš„æ ¸å¿ƒä¸»é¢˜...",
  "thoughtNumber": 1,
  "totalThoughts": 5,
  "nextThoughtNeeded": True
}

# å·¥å…·è¿”å›ç¤ºä¾‹ï¼š
{
  "thoughtNumber": 1,
  "totalThoughts": 5,
  "nextThoughtNeeded": True,
  "branches": [],
  "thoughtHistoryLength": 1
}
```

## ä¸å…¶ä»–å·¥å…·çš„ååŒ

åœ¨åˆ†ææ™ºèƒ½ä½“ä¸­ï¼ŒStructured Thinking å·¥å…·ä¸å…¶ä»–å·¥å…·ååŒå·¥ä½œï¼š

```
Structured Thinking (æ€è€ƒæ¡†æ¶)
    â†“
Semantic Scholar (å­¦æœ¯æœç´¢)
    â†“
Structured Thinking (åˆ†æå­¦æœ¯èµ„æ–™)
    â†“
Chart Generator (ç”Ÿæˆå¯è§†åŒ–)
    â†“
Structured Thinking (ç»¼åˆæ´å¯Ÿ)
    â†“
è¾“å‡ºæœ€ç»ˆåˆ†ææŠ¥å‘Š
```

## å‚è€ƒèµ„æº

- **GitHub**: https://github.com/modelcontextprotocol/servers/tree/main/src/sequentialthinking
- **NPM**: https://www.npmjs.com/package/@modelcontextprotocol/server-sequential-thinking
- **MCP æ–‡æ¡£**: https://modelcontextprotocol.io
- **æœ¬åœ°é…ç½®**: `social-media-ai-system/config/mcp_servers.json`
- **æ™ºèƒ½ä½“å®ç°**: `social-media-ai-system/agents/analysis_agent.py`

## æ€»ç»“

`mcp_LIFw3vNPhS4KRORHku5hV_capture_thought` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç»“æ„åŒ–æ€è€ƒå·¥å…·ï¼Œå®ƒé€šè¿‡ï¼š

1. **è®°å½•æ€è€ƒå†å²** - ä¿å­˜æ¯ä¸€æ­¥çš„æ¨ç†è¿‡ç¨‹
2. **æ”¯æŒåŠ¨æ€è°ƒæ•´** - å¯ä»¥å¢åŠ æˆ–å‡å°‘æ€è€ƒæ­¥éª¤
3. **å…è®¸ä¿®è®¢å’Œåˆ†æ”¯** - å¯ä»¥é‡æ–°æ€è€ƒæˆ–æ¢ç´¢å¤šä¸ªè·¯å¾„
4. **æä¾›å¯è§†åŒ–è¾“å‡º** - æ¸…æ™°å±•ç¤ºæ€è€ƒè¿‡ç¨‹
5. **ç¡®ä¿æ·±åº¦åˆ†æ** - å¼ºåˆ¶æ™ºèƒ½ä½“è¿›è¡Œç³»ç»ŸåŒ–æ€è€ƒ

è¿™ä½¿å¾—åˆ†ææ™ºèƒ½ä½“èƒ½å¤Ÿåƒäººç±»ä¸“å®¶ä¸€æ ·ï¼Œè¿›è¡Œæœ‰æ¡ç†ã€å¯è¿½æº¯ã€é«˜è´¨é‡çš„æ·±åº¦åˆ†æã€‚
