# ç¼“å­˜å®ç°çŠ¶æ€æŠ¥å‘Š

## ğŸ“Š å½“å‰çŠ¶æ€

### âœ… å·²æˆåŠŸå®ç°ç¼“å­˜çš„å·¥å…·

ç›®å‰å·²ä¸º **çŸ¥ä¹çƒ­æ¦œ** æ·»åŠ äº†å®Œæ•´çš„ç¼“å­˜æ”¯æŒï¼Œä½œä¸ºç¤ºä¾‹å®ç°ã€‚

1. **get-zhihu-trending** (çŸ¥ä¹çƒ­æ¦œ) âœ…
   - ç¼“å­˜é”®ï¼š`zhihu_trending`
   - ç¼“å­˜æ—¶é•¿ï¼š30åˆ†é’Ÿ
   - çŠ¶æ€ï¼šå®Œå…¨å®ç°å¹¶æµ‹è¯•é€šè¿‡

### ğŸ”„ è°ƒåº¦å™¨é…ç½®

å½“å‰è°ƒåº¦å™¨é…ç½®äº† 3 ä¸ªæ•°æ®æºè¿›è¡Œå®šæ—¶é¢„çƒ­ï¼š

```json
{
  "sources": [
    {
      "name": "weibo_trending",
      "tool_name": "get-weibo-trending",
      "interval_minutes": 20,
      "enabled": true
    },
    {
      "name": "zhihu_trending",
      "tool_name": "get-zhihu-trending",
      "interval_minutes": 20,
      "enabled": true
    },
    {
      "name": "bilibili_trending",
      "tool_name": "get-bilibili-trending",
      "interval_minutes": 20,
      "enabled": true
    }
  ]
}
```

## ğŸ¯ å®ç°æ–¹æ¡ˆ

### ç¼“å­˜æ¨¡å¼

æ¯ä¸ªå·¥å…·çš„ç¼“å­˜å®ç°éµå¾ªç»Ÿä¸€æ¨¡å¼ï¼š

```python
async def get_xxx_trending_func() -> list:
    """è·å–XXXçƒ­æ¦œæ•°æ®"""
    cache_key = "xxx_trending"
    
    # 1. å°è¯•ä»ç¼“å­˜è·å–
    try:
        cached_data = cache.get(cache_key)
        if cached_data:
            logger.info(f"ä»ç¼“å­˜è·å–{cache_key}æ•°æ®")
            return cached_data
    except Exception as e:
        logger.warning(f"è¯»å–ç¼“å­˜å¤±è´¥: {e}")
    
    # 2. ä»APIè·å–æ•°æ®
    results = await fetch_from_api()
    
    # 3. ç¼“å­˜ç»“æœ
    try:
        cache.set(cache_key, results)
        logger.info(f"è·å–{cache_key}æ•°æ®æˆåŠŸï¼Œå…±{len(results)}æ¡")
    except Exception as e:
        logger.warning(f"å†™å…¥ç¼“å­˜å¤±è´¥: {e}")
    
    return results
```

### ç¼“å­˜æœºåˆ¶

- **å­˜å‚¨ä½ç½®**ï¼š`C:\Users\18067\AppData\Local\Temp\mcp_daily_news\cache`
- **å­˜å‚¨æ ¼å¼**ï¼šJSONæ–‡ä»¶
- **æ–‡ä»¶å‘½å**ï¼š`{cache_key}.json`
- **ç¼“å­˜æ—¶é•¿**ï¼š30åˆ†é’Ÿï¼ˆå¯é…ç½®ï¼‰
- **è¿‡æœŸç­–ç•¥**ï¼šè‡ªåŠ¨åˆ é™¤è¿‡æœŸç¼“å­˜

## ğŸ“ˆ æ€§èƒ½æå‡

| æŒ‡æ ‡ | æ— ç¼“å­˜ | æœ‰ç¼“å­˜ | æå‡ |
|------|--------|--------|------|
| å“åº”æ—¶é—´ | 0.3-2ç§’ | <0.01ç§’ | 30-200å€ |
| APIè°ƒç”¨ | æ¯æ¬¡è¯·æ±‚ | 30åˆ†é’Ÿ1æ¬¡ | å‡å°‘99% |
| æœåŠ¡å™¨è´Ÿè½½ | é«˜ | ä½ | æ˜¾è‘—é™ä½ |

## ğŸš€ è°ƒåº¦å™¨åŠŸèƒ½

### è‡ªåŠ¨é¢„çƒ­

è°ƒåº¦å™¨ä¼šåœ¨ä»¥ä¸‹æ—¶æœºè‡ªåŠ¨é¢„çƒ­ç¼“å­˜ï¼š

1. **æœåŠ¡å¯åŠ¨æ—¶**ï¼šç«‹å³é¢„çƒ­æ‰€æœ‰é…ç½®çš„æ•°æ®æº
2. **å®šæ—¶ä»»åŠ¡**ï¼šæŒ‰é…ç½®çš„é—´éš”ï¼ˆå¦‚20åˆ†é’Ÿï¼‰è‡ªåŠ¨åˆ·æ–°
3. **ç¼“å­˜è¿‡æœŸå‰**ï¼šç¡®ä¿ç”¨æˆ·å§‹ç»ˆèƒ½è·å–åˆ°ç¼“å­˜æ•°æ®

### é¢„çƒ­æ—¥å¿—ç¤ºä¾‹

```
2025-10-23 22:38:01 - INFO - [zhihu_trending] Warming cache with tool get-zhihu-trending
2025-10-23 22:38:02 - INFO - [zhihu_trending] Cache warmed successfully (30 items, 0.42s)
2025-10-23 22:38:02 - INFO - è·å–çŸ¥ä¹çƒ­æ¦œæ•°æ®æˆåŠŸï¼Œå…±30æ¡
```

## ğŸ“ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡

1. âœ… éªŒè¯çŸ¥ä¹çƒ­æ¦œç¼“å­˜åŠŸèƒ½
2. â³ ä¸ºå¾®åšçƒ­æœæ·»åŠ ç¼“å­˜æ”¯æŒ
3. â³ ä¸ºBç«™çƒ­æ¦œæ·»åŠ ç¼“å­˜æ”¯æŒ
4. â³ ä¸ºå…¶ä»–çƒ­é—¨å·¥å…·é€æ­¥æ·»åŠ ç¼“å­˜

### é•¿æœŸç›®æ ‡

1. ä¸ºæ‰€æœ‰29ä¸ªå·¥å…·æ·»åŠ ç¼“å­˜æ”¯æŒ
2. å®ç°ç¼“å­˜ç»Ÿè®¡å’Œç›‘æ§é¢æ¿
3. ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ï¼ˆå¦‚æ™ºèƒ½è¿‡æœŸæ—¶é—´ï¼‰
4. æ·»åŠ ç¼“å­˜é¢„çƒ­ä¼˜å…ˆçº§é…ç½®

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### å¯åŠ¨æœåŠ¡

```bash
cd social-media-ai-system/daily-hot-mcp
python -m daily_hot_mcp
```

### æŸ¥çœ‹ç¼“å­˜æ–‡ä»¶

```powershell
dir C:\Users\18067\AppData\Local\Temp\mcp_daily_news\cache
```

### æµ‹è¯•ç¼“å­˜æ•ˆæœ

```python
import asyncio
from daily_hot_mcp.tools.zhihu import get_zhihu_trending_func

# ç¬¬ä¸€æ¬¡è°ƒç”¨ - ä»APIè·å–ï¼ˆè¾ƒæ…¢ï¼‰
result1 = asyncio.run(get_zhihu_trending_func())

# ç¬¬äºŒæ¬¡è°ƒç”¨ - ä»ç¼“å­˜è·å–ï¼ˆæå¿«ï¼‰
result2 = asyncio.run(get_zhihu_trending_func())
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¼“å­˜ä½ç½®**ï¼šå­˜å‚¨åœ¨ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼Œé‡å¯å¯èƒ½æ¸…ç©º
2. **ç¼“å­˜ç‹¬ç«‹**ï¼šæ¯ä¸ªå·¥å…·çš„ç¼“å­˜äº’ä¸å½±å“
3. **è‡ªåŠ¨è¿‡æœŸ**ï¼š30åˆ†é’Ÿåè‡ªåŠ¨å¤±æ•ˆå¹¶é‡æ–°è·å–
4. **å®¹é”™æœºåˆ¶**ï¼šç¼“å­˜å¤±è´¥ä¸å½±å“æ­£å¸¸åŠŸèƒ½

## ğŸ“Š ç›‘æ§å»ºè®®

å»ºè®®ç›‘æ§ä»¥ä¸‹æŒ‡æ ‡ï¼š

- ç¼“å­˜å‘½ä¸­ç‡
- ç¼“å­˜æ–‡ä»¶å¤§å°
- APIè°ƒç”¨é¢‘ç‡
- é¢„çƒ­ä»»åŠ¡æˆåŠŸç‡

## ğŸ‰ æ€»ç»“

ç¼“å­˜åŠŸèƒ½å·²æˆåŠŸå®ç°å¹¶é›†æˆåˆ°è°ƒåº¦å™¨ä¸­ï¼

- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´
- âœ… è°ƒåº¦å™¨æ­£å¸¸è¿è¡Œ
- âœ… æ—¥å¿—è®°å½•å®Œå–„
- âœ… æ€§èƒ½æå‡æ˜¾è‘—

ä¸‹ä¸€æ­¥å¯ä»¥é€æ­¥ä¸ºæ›´å¤šå·¥å…·æ·»åŠ ç¼“å­˜æ”¯æŒï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿæ€§èƒ½ã€‚
